// Generated by CoffeeScript 1.7.1
var LanderGame,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

LanderGame = (function() {
  function LanderGame() {
    this.preload = __bind(this.preload, this);
    this.render = __bind(this.render, this);
    this.updateAngle = __bind(this.updateAngle, this);
    this.isDown = __bind(this.isDown, this);
    this.updateForces = __bind(this.updateForces, this);
    this.update = __bind(this.update, this);
    this.create = __bind(this.create, this);
    this.game = new Phaser.Game(800, 500, Phaser.CANVAS, 'main', {
      preload: this.preload,
      create: this.create,
      update: this.update,
      render: this.render
    });
  }

  LanderGame.prototype.create = function() {
    this.game.add.tileSprite(0, 0, 1000, 900, "background");
    this.game.physics.startSystem(Phaser.Physics.P2JS);
    this.game.world.setBounds(0, 0, 800, 2000);
    this.game.stage.backgroundColor = '#000';
    this.background = this.game.add.tileSprite(0, 0, 1000, 900, "background");
    this.bmd = this.game.add.bitmapData(800, 600);
    this.bmd.context.fillStyle = '#ffffff';
    this.bg = this.game.add.sprite(0, 0, this.bmd);
    this.game.physics.p2.gravity.y = 3;
    this.game.physics.p2.defaultRestitution = 0.8;
    this.sprite = this.game.add.sprite(32, 450, 'lander');
    this.sprite.x = 400;
    this.sprite.y = 400;
    this.sprite.anchor.x = 64;
    this.sprite.anchor.y = 180;
    this.sprite.fixedRotation = true;
    this.game.camera.follow(this.sprite, Phaser.Camera.FOLLOW_LOCKON);
    return this.game.physics.p2.enable(this.sprite);
  };

  LanderGame.prototype.update = function() {
    this.updateAngle();
    return this.updateForces();
  };

  LanderGame.prototype.updateForces = function() {};

  LanderGame.prototype.keys = {
    left: Phaser.Keyboard.LEFT,
    right: Phaser.Keyboard.RIGHT,
    up: Phaser.Keyboard.UP,
    down: Phaser.Keyboard.DOWN
  };

  LanderGame.prototype.isDown = function(key) {
    return this.game.input.keyboard.isDown(this.keys[key]);
  };

  LanderGame.prototype.updateAngle = function() {
    var angleDelta, rotationDirection;
    angleDelta = 1;
    rotationDirection = 0;
    if (this.isDown('left')) {
      rotationDirection = -1;
    }
    if (this.isDown('right')) {
      rotationDirection = 1;
    }
    return this.sprite.body.angle += angleDelta * rotationDirection;
  };

  LanderGame.prototype.render = function() {};

  LanderGame.prototype.preload = function() {
    this.game.load.image('lander', 'img/lander.png');
    return this.game.load.image("background", "img/space01.png");
  };

  return LanderGame;

})();

new LanderGame;
